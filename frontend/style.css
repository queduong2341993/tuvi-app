/* üåü Th·ª© t·ª± hi·ªÉn th·ªã c√°c t·∫ßng (t·ª´ d∆∞·ªõi l√™n tr√™n) */
.layer-1 { z-index: 1; position: absolute; }   /* 12 Cung c∆° b·∫£n */
.layer-2 { z-index: 2; position: absolute; }   /* M·ªánh / Th√¢n */
.layer-3 { z-index: 3; position: absolute; }   /* Ch√≠nh Tinh */
.layer-4 { z-index: 4; position: absolute; }   /* C·ª•c S·ªë */
.layer-5 { z-index: 5; position: absolute; }   /* Ng≈© H√†nh Cung */
.layer-tieutinh { z-index: 6; position: absolute; } /* Ti·ªÉu tinh */
.layer-6 { z-index: 9; position: absolute; }   /* üåü Trung tinh (C√°t + Hung) lu√¥n n·∫±m TR√äN Ti·ªÉu tinh */
.layer-7 { z-index: 10; position: absolute; }  /* T·∫°p tinh / ƒë·∫∑c bi·ªát (Thi√™n Kh√¥ng, Thi√™n T√†i, ƒê·∫©u Qu√¢n...) */
.layer-8 { z-index: 11; position: absolute; }  /* Tu·∫ßn Tri·ªát, V√≤ng Tr√†ng Sinh, h·∫°n... */
.layer-9 { z-index: 12; position: absolute; }  /* C√°c hi·ªáu ·ª©ng highlight, T·ª© H√≥a click... */
.layer-10 { z-index: 13; position: absolute; } /* Overlay ho·∫∑c ch√∫ th√≠ch cao nh·∫•t */

/* üåü Hi·ªáu ·ª©ng khi click v√†o sao h√≥a */
/* üåü Hi·ªáu ·ª©ng vi·ªÅn ƒë·ªè nh·∫π khi ƒë∆∞·ª£c ch·ªçn */
.sao-highlight::before {
  content: "";
  position: absolute;
  inset: 0;
  background: transparent !important;
  border: none !important;
  filter: none !important;
}


/* üåø Layer 8 ‚Äì gi·ªØ b√°m ƒë√°y, KH√îNG ch·∫Øn click */
.layer-8 {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: auto !important;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  pointer-events: none;     /* ‚õî Kh√¥ng ch·∫Øn c√°c l·ªõp kh√°c */
  z-index: 60;
}

/* ‚úÖ Ch·ªâ ri√™ng ph·∫ßn ch·ªØ cho ph√©p click */
.layer8-div {
  display: inline-block;
  font-size: 12px;
  color: #000;
  font-style: italic;
  text-transform: capitalize;
  line-height: 1.2;
  margin-bottom: 5px;
  pointer-events: auto;     /* ‚úÖ Cho ph√©p click ri√™ng ch·ªØ */
  cursor: pointer;
}

/* ========== KHUNG T·ªîNG ========== */
body {
  font-family: 'Times New Roman', serif;
  background: #fafafa;
  margin: 25px;
}
.container {
  max-width: 920px;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  border: 1px solid #ccc;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
h1 {
  text-align: center;
  font-size: 28px;
  margin-bottom: 10px;
  color: #222;
  text-transform: uppercase;
}
/* ===== L·ªöP 1: V·ªä TR√ç CUNG ===== */
.layer-1 {
  position: absolute;
  top: 15px;
  left: 6px;
  font-size: 9px;
  font-weight: bold;
  color: #5a3b0c;
  text-align: left;
  pointer-events: none;
}
/* üåô L·ªöP 2 ‚Äì M·ªÜNH (t√™n ch·ª©c danh c·ªßa cung) */
.layer-2 {
 display: inline-block;
  transform: scaleX(0.9);   /* ‚úÖ b√≥p chi·ªÅu ngang 90% */
  transform-origin: center; /* ‚úÖ gi·ªØ t√¢m, kh√¥ng l·ªách tr√°i/ph·∫£i */
  letter-spacing: -0.1px;   /* ‚úÖ √©p k√Ω t·ª± g·∫ßn nhau h∆°n */
  position: relative;   /* üëà B·∫ÆT BU·ªòC, t·∫°o h·ªá to·∫° ƒë·ªô ri√™ng */
  width: 100%;
  text-align: center;
  font-weight: bold;
  font-size: 12px;
  color: #000;
  margin-top: 7px;
  pointer-events: none;
}

/* ========== FORM NH·∫¨P D·ªÆ LI·ªÜU ========== */
.input-row {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 6px;
  margin-bottom: 10px;
}
input, select {
  padding: 3px 5px;
  font-size: 14px;
}
button {
  padding: 6px 12px;
  cursor: pointer;
  border: none;
  background: #337ab7;
  color: white;
  border-radius: 4px;
}
button:hover { background: #286090; }

/* ========== KHUNG L√Å S·ªê ========== */
#lasoContainer {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(4, 1fr);
  width: 750px;
  height: 950px;
  margin: 0 auto;
  border: 2px solid #000;
  box-sizing: border-box;
  position: relative;
}
.cung {
  border: 1.5px solid #000; /* ƒë·∫≠m g·∫•p ƒë√¥i */
  background: #fff;
  font-family: "Times New Roman", serif;
  font-size: 13px;
  text-align: center;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
}
.cung .layer {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0; left: 0;
  pointer-events: none;
}

/* ========== √î TRUNG T√ÇM (c·ªë ƒë·ªãnh khung, ch·ªâ d·ªãch n·ªôi dung b√™n trong) ========== */
#centerCell {
  grid-column: 2 / span 2;
  grid-row: 2 / span 2;
  border: 2px solid #000;
  background: #fafafa;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;   /* üîº n·ªôi dung d·ªìn l√™n tr√™n */
  align-items: center;
  padding: 25px 20px 5px 20px;   /* üîº th√™m ƒë·ªám tr√™n, üîΩ gi·∫£m ƒë·ªám d∆∞·ªõi */
  line-height: 1.3;              /* üîΩ gi·∫£m gi√£n d√≤ng */
  text-align: center;
  box-sizing: border-box;        /* ‚úÖ tr√°nh tr√†n khung */
  overflow: hidden;              /* ‚úÖ tr√°nh tr√†n layout */
}

#centerCell .title {
  font-weight: bold;
  font-size: 18px;
  margin-bottom: 3px;            /* üîΩ gi·∫£m kho·∫£ng c√°ch ti√™u ƒë·ªÅ */
  letter-spacing: 1px;
}

#centerCell .info-line {
  font-size: 14px;
  margin: 1px 0;                 /* üîΩ c√°c d√≤ng s√°t nhau h∆°n */
}

#centerCell .sub-info {
  font-size: 12px;
  color: #555;
  margin-top: 2px;
  font-style: italic;
}


/* ========== B·∫¢NG HI·ªÇN TH·ªä K·∫æT QU·∫¢ ========== */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 15px;
}
th, td {
  border: 1px solid #000;
  padding: 6px;
  text-align: center;
}
th { background: #f2f2f2; }
/* üåü L·ªöP 3: CH√çNH TINH ‚Äì n·∫±m d∆∞·ªõi t√™n cung, c√≥ kho·∫£ng ƒë·ªám an to√†n */
.layer-3 {
  position: absolute;
  top: 37px;            /* ‚¨ÜÔ∏è t·ª´ 22px ‚Üí 34px ƒë·ªÉ tr√°nh d√≠nh tr·∫ßn */
  left: 0;
  width: 100%;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 0px;
  pointer-events: none;
  z-index: 5;           /* d∆∞·ªõi layer-2 (t√™n cung), tr√™n n·ªÅn */
}

.layer-3 div {
  line-height: 1.0;    /* ‚¨áÔ∏è ch·∫∑t h∆°n m·ªôt ch√∫t ƒë·ªÉ g·ªçn */
  font-weight: bold;
  font-size: 18px;      /* ‚¨áÔ∏è t·ª´ 22px ‚Üí 18px ƒë·ªÉ kh√¥ng ch·∫°m tr·∫ßn ·ªü √¥ nh·ªè */
  letter-spacing: 0.4px;
  text-transform: uppercase;
}
/* üåü L·ªöP 4 ‚Äì C·ª§C S·ªê (cƒÉn g√≥c ph·∫£i tr√™n tho√°ng h∆°n) */
.layer-4 {
  position: absolute;
  top: 6px;       /* ‚¨á th·∫•p h∆°n ƒë·ªÉ kh√¥ng d√≠nh m√©p */
  right: 6px;     /* ‚¨Ö l√πi v√†o s√¢u h∆°n m·ªôt ch√∫t */
  text-align: right;
  font-weight: bold;
  font-size: 13px;
  color: #000;
  z-index: 20;
  pointer-events: none;
}
.layer-4 div {
  position: absolute;
  top: 8px;   /* ‚Üë cao l√™n ƒë√∫ng 2 px so v·ªõi b·∫£n c≈© */
  right: 8px;   /* ‚Üê gi·ªØ kho·∫£ng c√°ch v·ª´a ph·∫£i, kh√¥ng d√≠nh m√©p */
  font-weight: bold;
  font-size: 10px;
  color: #000;
  line-height: 1; /* tr√°nh gi√£n d√≤ng l√†m l·ªách */
}
/* üåü L·ªöP 5 ‚Äì NG≈® H√ÄNH CUNG */
.layer-5 {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 15;
}
.layer5-div {
  position: absolute;
  top: 20px;
  left: 5px;
  font-size: 8px;       /* üîΩ nh·ªè h∆°n ƒë·ªÉ d·ªãu h∆°n */
  font-weight: normal;   /* üîΩ gi·∫£m ƒë·∫≠m */
  color: #000;
  opacity: 0.8;          /* üîΩ m·ªù nh·∫π cho ƒë·ª° n·ªïi b·∫≠t */
  line-height: 1;
}
/* L·ªöP 4 ‚Äì C·ª§C S·ªê */
.cell {
  position: relative; /* gi√∫p layer 4 b√°m theo cung */
}

/* ‚ú® Hi·ªáu ·ª©ng s√°ng khi ch·ªçn cung */
.cung.highlight {
  border: 2px solid gold !important;
  box-shadow: 0 0 10px 3px gold;
  transition: all 0.3s ease;
}
/* ‚ú® Hi·ªáu ·ª©ng s√°ng khi ch·ªçn */
.highlight {
  background: rgba(255, 255, 0, 0.25);
  box-shadow: 0 0 6px gold;
  border-radius: 4px;
}
/* ‚ú® Hi·ªáu ·ª©ng s√°ng khi ch·ªçn cung */
.cung.highlight-cung {
  border: 2px solid gold !important;
  box-shadow: 0 0 10px 3px gold;
  transition: all 0.3s ease;
}
/* PATCH: c·ªë ƒë·ªãnh kho·∫£ng c√°ch cho L·ªõp 3 ‚Äì Ch√≠nh Tinh */
.cung .layer-3{
  top: 26px !important;           /* ‚¨Ü h·∫° xu·ªëng d∆∞·ªõi tr·∫ßn */
  z-index: 5 !important;
}
.cung .layer-3 div{
  font-size: 12px !important;     /* ‚¨á g·ªçn ch·ªØ ƒë·ªÉ kh√¥ng ƒë·ªôi tr·∫ßn ·ªü √¥ ch·∫≠t */
  line-height: 1.15 !important;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}

/* üåü LAYER 6 ‚Äì C√ÅT & HUNG TINH (chu·∫©n cu·ªëi) */
.cung .layer-6 {
  position: absolute !important;
  left: 2% !important;
  width: 96% !important;
  top: 23% !important;
  height: 60% !important;
  z-index: 6 !important;
  display: block !important;
  /* ‚ö†Ô∏è pointer-events none g√¢y l·ªói m√†u ‚Äî b·ªè ƒëi */
  pointer-events: auto !important;
  margin: 0 !important;
}


/* Hai c·ªôt song song */
.cung .layer-6 > .cat-tinh,
.cung .layer-6 > .hung-tinh {
  position: absolute !important;
  top: 0; bottom: 0;
  width: 48%;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  line-height: 1.15;
  font-size: 13px;
  white-space: normal;
  word-break: keep-all;
  pointer-events: auto; /* ‚ö†Ô∏è Cho ph√©p render ƒë·∫ßy ƒë·ªß */
  color: unset !important;  /* ‚úÖ KH√îNG k·∫ø th·ª´a, cho ph√©p m√†u ri√™ng c·ªßa sao hi·ªÉn th·ªã */
}

/* üü¢ C√°t Tinh b√™n tr√°i ‚Äì cƒÉn l·ªÅ tr√°i s√°t m√©p */
.cung .layer-6 > .cat-tinh {
  left: 0;
  text-align: left;
  padding-left: 2px;
  padding-right: 0;
}

/* üî¥ Hung Tinh b√™n ph·∫£i ‚Äì cƒÉn l·ªÅ ph·∫£i s√°t m√©p */
.cung .layer-6 > .hung-tinh {
  right: 0;
  text-align: left;
  padding-right: 2px;
  padding-left: 0;
}
/* üåü M√†u sao theo Ng≈© H√†nh (phi√™n b·∫£n s√°ng r√µ, ƒë·ªìng b·ªô to√†n h·ªá th·ªëng) */
.sao-hoa  { color: #ff4d4d !important; }   /* üî• H·ªèa ‚Äì ƒë·ªè t∆∞∆°i s√°ng */
.sao-tho  { color: #e69500 !important; }   /* üü† Th·ªï ‚Äì cam ƒë·∫•t ƒë·∫≠m h∆°n, r√µ ch·ªØ */
.sao-moc  { color: #007a29 !important; }   /* üåø M·ªôc ‚Äì xanh l√° ƒë·∫≠m h∆°n m·ªôt ch√∫t */
.sao-kim  { color: #000000 !important; }   /* ‚ö´ Kim ‚Äì ƒëen thu·∫ßn */
.sao-thuy { color: #004cff !important; }   /* üíß Th·ªßy ‚Äì xanh d∆∞∆°ng ƒë·∫≠m s√°ng */


/* (Tu·ª≥ ch·ªçn debug)
.cung .layer-6,
.cung .layer.layer-6.trungtinh { outline: 1px dashed red !important; }
*/
/* üåü Style sao theo Ng≈© H√†nh + in ƒë·∫≠m */
.cat-tinh div,
.hung-tinh div {
  font-weight: 700;        /* ‚úÖ In ƒë·∫≠m */
  line-height: 1.25;
  margin-bottom: 1px;
}

/* üî• H·ªèa ‚Äì ƒë·ªè t∆∞∆°i s√°ng */
.sao-hoa { color: #ff4d4d !important; }

/* üü† Th·ªï ‚Äì cam ƒë·∫•t ƒë·∫≠m h∆°n */
.sao-tho { color: #e69500 !important; }

/* üåø M·ªôc ‚Äì xanh l√° ƒë·∫≠m h∆°n m·ªôt ch√∫t */
.sao-moc { color: #007a29 !important; }

/* ‚ö´ Kim ‚Äì ƒëen thu·∫ßn */
.sao-kim { color: #000000 !important; }

/* üíß Th·ªßy ‚Äì xanh d∆∞∆°ng ƒë·∫≠m s√°ng */
.sao-thuy { color: #004cff !important; }

.cung .layer-1 {
  top: 8px !important;
  left: 6px !important;
}
/* ‚úÖ Cho ph√©p click v√† hi·ªáu ·ª©ng s√°ng */
.layer-6 div {
  position: relative;
  z-index: 50 !important;     /* Cho n·∫±m tr√™n c√πng */
  cursor: pointer !important; /* Bi·∫øn con tr·ªè th√†nh b√†n tay khi di chu·ªôt */
  pointer-events: auto !important;
}

/* üåü Sao H√≥a ‚Äì n·ªïi vi·ªÅn ƒë·ªè, gi·ªØ nguy√™n m√†u g·ªëc */
.sao-highlight {
  font-weight: 700;
color: inherit !important; /* ‚úÖ k·∫ø th·ª´a ƒë√∫ng m√†u sao h√†nh */

  text-shadow:
    0 0 1px rgba(255, 60, 60, 0.9),
    0 0 2px rgba(255, 60, 60, 0.7),
    0 0 3px rgba(255, 80, 80, 0.4);
  transition: text-shadow 0.2s ease;
  animation: none !important;
  will-change: color, text-shadow;
transform: translateZ(0);

}

/* üåü Sao g·ªëc ‚Äì s√°ng lam nh·∫π ƒë·ªÉ ph√¢n bi·ªát */
.sao-highlight.root-star {
color: unset !important;
  text-shadow:
    0 0 1px rgba(120, 180, 255, 0.8),
    0 0 2px rgba(120, 180, 255, 0.5);
	will-change: color, text-shadow;
transform: translateZ(0);

}



@keyframes glow {
  from { text-shadow: 0 0 5px #00e6ff; }
  to   { text-shadow: 0 0 25px #00e6ff, 0 0 40px #00e6ff; }
}

#lasoContainer {
  position: relative;  /* üëà B·∫ÆT BU·ªòC ƒë·ªÉ Tu·∫ßn/Tri·ªát ƒë·ªãnh v·ªã ƒë√∫ng v·ªã tr√≠ */
}
.nut-tieutinh {
  background: #ccc;         /* üîò n·ªÅn x√°m b·∫°c khi t·∫Øt */
  color: #000;              /* ‚úèÔ∏è ch·ªØ ƒëen khi t·∫Øt */
  border: none;
  border-radius: 6px;
  padding: 5px 10px;
  font-size: 12px;
  cursor: pointer;
  transition: background 0.3s, color 0.3s;
}

.nut-tieutinh.active {
  background: #337ab7;      /* üîµ n·ªÅn xanh khi b·∫≠t */
  color: #fff;              /* ‚ö™ ch·ªØ tr·∫Øng khi b·∫≠t */
}

.nut-tieutinh:hover {
  filter: brightness(1.1);  /* ‚ú® s√°ng nh·∫π khi hover */
}


/* ‚úÖ N·ªõi chi·ªÅu cao Layer 6 ƒë·ªÉ ch·ª©a th√™m nhi·ªÅu sao m√† kh√¥ng l√†m h·ªèng b·ªë c·ª•c */
.layer-6.trungtinh {
  position: relative;
  min-height: 220px !important;  /* üîπ tƒÉng t√πy √Ω: 180px, 200px, 240px... */
  height: auto !important;
  overflow: visible !important;   /* üîπ ƒë·∫£m b·∫£o c√°c sao kh√¥ng b·ªã c·∫Øt */
  z-index: 6;
}

/* ‚úÖ Gi·ªØ nguy√™n c·∫•u tr√∫c c≈© cho c√°c sao b√™n trong (kh√¥ng flex, kh√¥ng grid) */
.layer-6.trungtinh > div {
  display: block;
  position: relative;
  width: 100%;
}


/* üåü L√†m r√µ sao l∆∞u (ƒêV. / L.) m√† v·∫´n gi·ªØ m√†u h√†nh */
.sao[data-order="9"] {
  opacity: 0.95;
}
.sao-luu {
  font-weight: 700;
  filter: brightness(1.1);
}

/* ‚úÖ √âp l·∫°i m√†u cho c√°c sao l∆∞u (L. / ƒêV.) d·ª±a theo h√†nh c·ªßa sao g·ªëc */
div[class*="sao-"].sao-luu,
div[class*="sao-"].sao-dv {
  font-weight: 700 !important;
  filter: brightness(1.15) !important;
  opacity: 1 !important;
}

/* üé® B·∫¢NG M√ÄU CH√çNH ‚Äì √ÅP D·ª§NG CHO M·ªåI L·ªöP SAO (∆∞u ti√™n cao nh·∫•t) */
div[class*="sao-hoa"]  { color: #ff4d4d !important; }   /* üî• H·ªèa ‚Äì ƒë·ªè t∆∞∆°i s√°ng */
div[class*="sao-tho"]  { color: #e69500 !important; }   /* üü† Th·ªï ‚Äì cam ƒë·∫•t ƒë·∫≠m r√µ ch·ªØ */
div[class*="sao-moc"]  { color: #007a29 !important; }   /* üåø M·ªôc ‚Äì xanh l√° ƒë·∫≠m h∆°n m·ªôt ch√∫t */
div[class*="sao-kim"]  { color: #000000 !important; }   /* ‚ö´ Kim ‚Äì ƒëen thu·∫ßn c·ªï ƒëi·ªÉn */
div[class*="sao-thuy"] { color: #004cff !important; }   /* üíß Th·ªßy ‚Äì xanh d∆∞∆°ng ƒë·∫≠m s√°ng */


/* üåü Vi·ªÅn s√°ng ƒë·ªè cho cung ch√≠nh v√† tam h·ª£p */
.cung.highlight-cung {
  outline: 2px solid #ff0000 !important;
  box-shadow: 0 0 12px #ff0000;
  z-index: 30;
  transition: all 0.25s ease;
}

/* üåô Hi·ªáu ·ª©ng m·ªù elip trung t√¢m cho 8 cung c√≤n l·∫°i */
.cung.dimmed::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none; /* ‚úÖ kh√¥ng ch·∫∑n click sao/T·ª© H√≥a */
  z-index: 10;
  border-radius: 8px;

  /* üé® Hi·ªáu ·ª©ng elip: trung t√¢m m·ªù, vi·ªÅn trong su·ªët */
  background: radial-gradient(
    ellipse at center,
    rgba(255, 255, 255, 0.5) 0%,    /* trung t√¢m m·ªù nh·∫π */
    rgba(255, 255, 255, 0.35) 40%,  /* v√πng trung gian */
    rgba(255, 255, 255, 0.0) 80%    /* vi·ªÅn ngo√†i trong su·ªët */
  );

  transition: opacity 0.3s ease;
  opacity: 1;
}

/* üåÄ Khi t·∫Øt hi·ªáu ·ª©ng, cho fade-out m∆∞·ª£t */
.cung:not(.dimmed)::after {
  opacity: 0;
}


/* üåü Song Tinh ‚Äì n·ªïi vi·ªÅn ƒë·ªè m·∫°nh h∆°n sao H√≥a */
.song-tinh {
  font-weight: 700;
color: inherit !important; /* ‚úÖ gi·ªØ nguy√™n m√†u sao h√†nh */

  text-shadow:
    0 0 1.5px rgba(255, 50, 50, 1),
    0 0 3px rgba(255, 50, 50, 0.9),
    0 0 5px rgba(255, 80, 80, 0.8),
    0 0 8px rgba(255, 100, 100, 0.6);
  transition: text-shadow 0.2s ease;
  animation: none !important;
  z-index: 600 !important;
}

.sub-title {
  font-weight: bold;
  color: #7b2cbf;
  margin-top: 5px;
  cursor: pointer;
}
.sub-title:hover { text-decoration: underline; }
.subgroup ul { margin-left: 15px; }


.cd-actions {
  display: flex;
  gap: 4px;
  align-items: center;
  justify-content: flex-end;
}
.cd-actions button {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 15px;
  color: #7b2cbf;
}
.cd-actions button:hover {
  color: #3a0ca3;
  transform: scale(1.1);
}

.cd-addchild .btnAddChild {
  background: none;
  border: none;
  color: #7b2cbf;
  font-weight: regular;
  cursor: pointer;
  font-size: 5px;
}
.cd-addchild .btnAddChild:hover {
  color: #3a0ca3;
  text-decoration: underline;
}

.cd-actions {
  display: flex;
  gap: 4px;
  align-items: center;
  justify-content: flex-end;
}
.cd-actions button {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 15px;
  color: #7b2cbf;
}
.cd-actions button:hover {
  color: #3a0ca3;
  transform: scale(1.1);
}
.cd-addchild .btnAddChild {
  background: none;
  border: none;
  color: #7b2cbf;
  font-weight: bold;
  cursor: pointer;
  font-size: 14px;
}
.cd-addchild .btnAddChild:hover {
  color: #3a0ca3;
  text-decoration: underline;
}


.btnAddChuyenDe {
  display: block;
  margin: 10px auto;
  background: #7b2cbf;
  color: #fff;
  font-weight: 600;
  border: none;
  border-radius: 8px;
  padding: 8px 20px;
  cursor: pointer;
  font-size: 15px;
  transition: 0.2s;
}
.btnAddChuyenDe:hover {
  background: #5a189a;
  transform: scale(1.04);
}


.dragging {
  opacity: 0.5;
  background: #f3e8ff;
  border: 1px dashed #7b2cbf;
}

/* =============================== */
/* ‚ú® Hi·ªáu ·ª©ng highlight nh√≥m ƒëang r√™ chu·ªôt */
/* =============================== */


/* Gi·ªØ vi·ªÅn k·∫ª m·ªÅm m·∫°i */
.cd-item > ul.cd-level {
  border-left: 1px dotted #ccc;
}

/* M∆∞·ª£t h∆°n khi r√™ qua l·∫°i */
.cd-item, .cd-item * {
  transition: all 0.2s ease;
}

/* ·∫®n to√†n b·ªô c√°c n√∫t h√†nh ƒë·ªông m·∫∑c ƒë·ªãnh */
.cd-actions {
  visibility: hidden;
}

/* Khi b·∫≠t ch·∫ø ƒë·ªô s·ª≠a th√¨ hi·ªÉn th·ªã l·∫°i */
body.edit-mode .cd-actions {
  visibility: visible;
}

/* Hi·ªáu ·ª©ng m∆∞·ª£t */
.cd-actions {
  transition: opacity 0.3s ease, visibility 0.3s ease;
  opacity: 0;
}
body.edit-mode .cd-actions {
  opacity: 1;
}

/* N√∫t "S·ª≠a" ƒë·ªïi m√†u khi ƒëang b·∫≠t */
#btnToggleEdit.active {
  background: #c2185b !important;
}
/* =============================== */
/* ‚öôÔ∏è ƒêi·ªÅu ch·ªânh kho·∫£ng th·ª•t cho c√¢y CHUY√äN ƒê·ªÄ */
/* =============================== */

.cd-item > ul.cd-level {
  padding-left: 0px !important; /* üëà gi·∫£m th·ª•t m·∫°nh */
  border-left: 0px dotted #ccc;
}

/* C·∫•p s√¢u h∆°n l√πi nh·∫π h∆°n n·ªØa */
.cd-item > ul.cd-level > li > ul.cd-level {
  padding-left: 0px !important;
}
.cd-item > ul.cd-level > li > ul.cd-level > li > ul.cd-level {
  padding-left: 0px !important;
}


#sidebarTraCuu li.highlight-sao {
  background: linear-gradient(90deg, #e4dcff 0%, #f7f3ff 100%);
  border-left: 4px solid #7b2cbf;
  font-weight: bold;
  color: #3a0ca3;
  border-radius: 4px;
  transition: background 0.3s ease, color 0.3s ease;
}
/* üåø LAYER 8 ‚Äì V√≤ng Tr√†ng Sinh (n·ªïi tr√™n c√°c sao, v·∫´n kh√¥ng ph√° t∆∞∆°ng t√°c kh√°c) */
.layer-8 {
  position: absolute;
  bottom: 0;
  width: 100%;
  text-align: center;
  font-size: 11px;
  font-weight: bold;
  color: purple;
  z-index: 80;                /* üî∫ cao h∆°n l·ªõp 6 nh∆∞ng th·∫•p h∆°n popup */
  pointer-events: none;       /* ‚õî kh√¥ng ch·∫∑n click chung */
}

.layer8-div {
  pointer-events: auto;       /* ‚úÖ ch·ªâ ch·ªØ Tr√†ng Sinh m·ªõi nh·∫≠n click */
  user-select: text;
  text-transform: capitalize;
}



#listChuyenDe li.dragging {
  opacity: 0.5;
  background: #f8f5ff;
  border: 1px dashed #999;
}
#listChuyenDe li:hover {
  background: #fafaff;
}


/* üåü Hi·ªáu ·ª©ng rung khi click ra ngo√†i ƒëang ch·ªânh s·ª≠a */
@keyframes shakeAnim {
  0%, 100% { transform: translate(-50%, -50%) }
  20%, 60% { transform: translate(calc(-50% - 4px), -50%) }
  40%, 80% { transform: translate(calc(-50% + 4px), -50%) }
}
.shake {
  animation: shakeAnim 0.1s ease;
}



.tuan-triet {
  position: absolute;
  z-index: 120 !important;
}




#popupChuyenDe .popup-content {
  width: 60%;
  max-width: 1000px;
  min-width: 400px;
  min-height: 250px;
  resize: both;          /* üëâ cho ph√©p co gi√£n */
  overflow: auto;        /* c·∫ßn thi·∫øt ƒë·ªÉ scroll khi thu nh·ªè */
  box-sizing: border-box;
  position: relative;
  background: #fff;
  border-radius: 10px;
}

/* Th√™m tay n·∫Øm k√©o ·ªü g√≥c ph·∫£i-d∆∞·ªõi cho ƒë·∫πp */
#popupChuyenDe .popup-content::after {
  content: "";
  position: absolute;
  right: 6px;
  bottom: 6px;
  width: 16px;
  height: 16px;
  background: repeating-linear-gradient(
    45deg,
    #ccc,
    #ccc 2px,
    transparent 2px,
    transparent 4px
  );
  cursor: se-resize;
  border-radius: 3px;
  opacity: 0.6;
}

.highlight-cachcuc {
  background: linear-gradient(90deg, #fff0f0 0%, #ffe0e0 100%);
  border: 2px solid #e03131;          /* üî¥ Vi·ªÅn ƒë·ªè n·ªïi r√µ */
  border-radius: 10px;
  box-shadow: 0 0 12px 3px rgba(224, 49, 49, 0.6); /* √°nh ƒë·ªè m·ªù */
  transform: scale(1.02);
  transition: all 0.3s ease-in-out;
  animation: highlightPulse 1s ease-in-out infinite alternate;
}

@keyframes highlightPulse {
  from { box-shadow: 0 0 8px 2px rgba(224, 49, 49, 0.4); }
  to   { box-shadow: 0 0 14px 3px rgba(224, 49, 49, 0.7); }
}



/* Popup Overlay */
.popup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.6);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
}
.popup.hidden {
  display: none;
}

.popup-content {
  background: white;
  width: 80%; max-width: 600px;
  border-radius: 8px;
  padding: 20px;
  position: relative;
}

.close-btn {
  position: absolute; top: 10px; right: 10px;
  font-size: 18px; cursor: pointer;
}

.tabs {
  display: flex;
  border-bottom: 1px solid #ccc;
  margin-bottom: 10px;
}

.tab-link {
  flex: 1;
  padding: 10px;
  border: none; cursor: pointer;
  background: #f4f4f4; font-weight: bold;
}
.tab-link.active {
  background: #ddd;
}

.tab-content {
  display: none;
}
.tab-content.active {
  display: block;
}

#cungChucTable {
  width: 100%; border-collapse: collapse;
}

#cungChucTable td {
  padding: 8px;
  border: 1px solid #ddd;
}
#cungChucTable .active {
  background: #ffe6e6;
  font-weight: bold;
}


.cung-highlight {
  background: #fff3cd !important;
  border: 2px solid #ffb700 !important;
}

/* N√∫t toggle */
#btnToggleSidebar {
  position: fixed;
  top: 12px;
  left: 12px;
  width: 40px;
  height: 40px;
  background: rgba(255,255,255,0.7);
  backdrop-filter: blur(5px);
  border: 1px solid rgba(200,200,200,0.6);
  border-radius: 10px;
  font-size: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #444;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  cursor: pointer;
  z-index: 99999;
}

/* Sidebar d·∫°ng tr∆∞·ª£t ngang */
#sidebarTraCuu {
  position: fixed;
  top: 0;
  left: 0;
  width: 260px;
  height: 100vh;
  overflow-y: auto;
  background: #fff;
  border-right: 1px solid #ddd;
  transform: translateX(-100%);
  transition: transform 0.35s ease;
  z-index: 9999;
}
#sidebarTraCuu.show {
  transform: translateX(0);
}

/* Ng·ª´a flicker khi iPhone overscroll */
#sidebarTraCuu::-webkit-scrollbar {
  width: 6px;
}

/* ===== Auth card (login/register) ===== */
.auth-card {
  position: fixed; /* lu√¥n hi·ªÉn th·ªã v√† nh·∫≠n click */
  top: 16px;
  right: 16px;
  width: 320px;
  margin: 0;
  border: 1px solid #d9d9d9;
  border-radius: 8px;
  padding: 10px;
  background: #fff7f0;
  box-shadow: 0 2px 12px rgba(0,0,0,0.12);
  z-index: 2147483647;
  pointer-events: auto !important;
}
.auth-card__header {
  font-weight: bold;
  margin-bottom: 6px;
  color: #7b2cbf;
}
.auth-card__status {
  font-size: 13px;
  margin-bottom: 8px;
  color: #444;
}
.auth-card__form input {
  width: 100%;
  margin-bottom: 6px;
  padding: 6px 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 13px;
}
.auth-card__actions {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.auth-card__actions button,
.auth-card__upgrade {
  flex: 1;
  border: none;
  border-radius: 6px;
  padding: 6px 10px;
  cursor: pointer;
  background: #5a189a;
  color: #fff;
}
.auth-card__actions button:nth-child(2) {
  background: #0d9488;
}
.auth-card__actions button:nth-child(3) {
  background: #9ca3af;
  color: #111;
}
.auth-card__upgrade {
  background: #f97316;
  margin-top: 6px;
}

/* FOOTER C·ªê ƒê·ªäNH D∆Ø·ªöI C√ôNG POPUP */
#footerChuyenDe {
  position: sticky;
  bottom: -22px;
  background: white;
  padding: 10px 0 12px 0;
  border-top: 1px solid #ddd;
  text-align: right;
  z-index: 50;
}

#footerChuyenDe button {
  margin-left: 6px;
  background: #7b2cbf;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
}

#btnSaveCD {
  background: #ff9800;
}
#btnCancelCD {
  background: #888;
}

.tieutinh { font-weight: normal; font-size: 12px; text-transform: capitalize; margin-bottom: 1px; }
.tieutinh.hidden { display: none !important; }
#tieuTinhControls { display: flex; flex-wrap: wrap; justify-content: center; gap: 4px; margin-top: 6px; }
#tieuTinhControls button { font-size: 12px; border-radius: 6px; border: 1px solid #999; padding: 2px 6px; cursor: pointer; }
#tieuTinhControls button:hover { background-color: #ddd; }

#sidebarTraCuu {
  position: fixed;
  top: 0;
  left: 0;
  width: 330px;
  bottom: 0;              /* üîπ Thay v√¨ height:100% ‚Üí d√πng bottom:0 */
  background: #fafafa;
  border-right: 1px solid #ccc;
  overflow-y: auto;       /* üîπ Cho ph√©p cu·ªôn */
  overflow-x: hidden;
  padding: 10px 12px 80px; /* üîπ th√™m kho·∫£ng ƒë·ªám ƒë√°y tr√°nh che b·ªüi footer */
  font-family: "Times New Roman";
  z-index: 99900;
  scrollbar-width: thin;   /* üîπ thanh cu·ªôn m·∫£nh, ƒë·∫πp */
}

#sidebarTraCuu h3 {
  text-align: center;
  margin-bottom: 10px;
}
.group-title {
  font-weight: bold;
  cursor: pointer;
  color: #7b2cbf;
  margin-top: 10px;
}
.group ul {
  margin-left: 15px;
  display: none;
}
.group.open ul { display: block; }
.group ul li {
  cursor: pointer;
  padding: 2px 0;
}
.group ul li:hover { background: #eae6ff; }

/* M·ªói d√≤ng chuy√™n ƒë·ªÅ */
    #listChuyenDe li {
      margin-bottom: 5px;
      line-height: 1.5;
      padding-bottom: 2px;
      border-bottom: 1px dotted #ddd;
      color: #3a0ca3;
    }

    /* M·ª•c c√≥ danh s√°ch con */
    #listChuyenDe li:has(> ul) {
      position: relative;
      padding-left: 16px;
    }

    /* D·∫•u üîπ cho m·ª•c c√≥ con */
    #listChuyenDe li:has(> ul)::before {
      content: "üîπ";
      position: absolute;
      left: 0;
      top: 2px;
      font-size: 12px;
      color: #6a0dad;
    }

    /* C√°c c·∫•p con l√πi nh·∫π */
    #listChuyenDe li ul {
      margin-left: 12px;
      border-left: 1px dotted #ccc;
      padding-left: 10px;
    }

/* üåô N·ªÅn m·ªù */
.popup-overlay {
  display: none;              /* ‚úÖ KH√îNG c√≥ !important */
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(3px);
  z-index: 9999;
  overflow: visible;
  justify-content: center;
  align-items: center;
}


/* üåü Khung ch√≠nh ‚Äì t·ª± gi√£n theo n·ªôi dung b·∫£ng */
.popup-content {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  padding: 25px 35px;
  font-family: "Times New Roman";
  animation: fadeIn 0.25s ease;
  position: relative;           /* ‚úÖ kh√¥ng d√πng fixed */
  margin: auto;                 /* ‚úÖ cƒÉn gi·ªØa */
  max-width: 90vw;              /* ‚úÖ gi·ªõi h·∫°n theo m√†n h√¨nh */
  max-height: 90vh;
  overflow: auto;               /* ‚úÖ ch·ªâ cu·ªôn khi th·∫≠t s·ª± tr√†n */

  /* ‚úÖ Cho ph√©p ng∆∞·ªùi d√πng t·ª± ch·ªânh k√≠ch th∆∞·ªõc n·∫øu mu·ªën */
  resize: both;
  cursor: nwse-resize;
  box-sizing: border-box;
}
/* üåø ·∫®n c√¥ng c·ª• b·∫£ng khi kh√¥ng ch·ªânh s·ª≠a */
[data-edit-only="true"] .table-tools {
  display: none;
}

/* üåø Khi ƒëang ch·ªânh s·ª≠a (popup c√≥ class .edit-mode) ‚Üí hi·ªán c√¥ng c·ª• */
.edit-mode [data-edit-only="true"] .table-tools {
  display: block;
  margin-top: 8px;
}

.table-tools button {
  background: #4a6fa5;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 5px 10px;
  margin-right: 4px;
  cursor: pointer;
}
.table-tools button:hover {
  background: #2f517c;
}



/* üåü Hi·ªáu ·ª©ng rung nh·∫π khi kh√¥ng cho ƒë√≥ng */
@keyframes shakePopup {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  20% { transform: translate(-49%, -50%) rotate(1deg); }
  40% { transform: translate(-51%, -50%) rotate(-1deg); }
  60% { transform: translate(-49%, -50%) rotate(1deg); }
  80% { transform: translate(-51%, -50%) rotate(-1deg); }
  100% { transform: translate(-50%, -50%) rotate(0deg); }
}
.shake {
  animation: shakePopup 0.25s ease;
}

/* üåø B·∫£ng trong popup ‚Äì c√¢n ƒë·ªÅu, kh√¥ng l·ªách, v·ª´a khung */
.popup-content table {
  border-collapse: collapse;
  width: 100%;
  margin: 10px auto;
  table-layout: fixed;           /* ‚úÖ C√°c c·ªôt chia ƒë·ªÅu */
  text-align: left;
  background: #fff;
}

.popup-content th,
.popup-content td {
  border: 1px solid #444;
  padding: 6px 8px;
  word-break: break-word;        /* ‚úÖ Kh√¥ng tr√†n ch·ªØ */
  vertical-align: top;
}

.popup-content th {
  background: #f3f3f3;
  font-weight: bold;
  text-align: center;
}



@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to   { opacity: 1; transform: scale(1); }
}

.popup-close {
  position: absolute;
  right: 12px;
  top: 10px;
  font-size: 24px;
  cursor: pointer;
  color: #555;
}
.popup-close:hover { color: #000; }

#popupFooter {
  position: sticky;
  bottom: -25px;
  background: white;
  padding: 10px 0 12px 0; /* s√°t m√©p d∆∞·ªõi */
  margin-top: 0;         /* b·ªè kho·∫£ng tr·ªëng tr√™n */
  border-top: 1px solid #ddd;
  text-align: right;
  z-index: 50;
}

#popupFooter button { margin-left: 6px; }

#btnChiTiet, #btnEdit, #btnSave, #btnCancel {
  background: #7b2cbf;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-family: inherit;
}
#btnChiTiet:hover, #btnEdit:hover, #btnSave:hover, #btnCancel:hover {
  background: #5b1599;
}

.edit-input {
  width: 97%;
  font-family: "Times New Roman";
  font-size: 15px;
  margin: 3px 0;
  resize: vertical;
}
/* üåø M·∫∑c ƒë·ªãnh ·∫©n c√¥ng c·ª• b·∫£ng */
.table-tools {
  display: none;
}

/* üåø Khi popup ƒëang ch·ªânh s·ª≠a ‚Üí hi·ªán c√¥ng c·ª• */
.edit-mode .table-tools {
  display: flex;
  flex-wrap: wrap;
  margin-top: 8px;
  gap: 6px;
}

.table-tools button {
  background: #4a6fa5;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 5px 10px;
  cursor: pointer;
  font-size: 14px;
}
.table-tools button:hover {
  background: #2f517c;
}

#popupChuyenDe .popup-content {
    width:90%;          /* b·∫°n c√≥ th·ªÉ ch·ªânh 90 ‚Üí 95 ‚Üí 100% t√πy √Ω */
    max-width:1300px;   /* ƒë·ªß r·ªông */
    margin-left: auto;  /* ƒë·∫©y sang ph·∫£i */
    margin-right: 40px; /* c√°ch m√©p ph·∫£i 20px, mu·ªën s√°t = 0px */
}

/* ‚úÖ ƒê·ªìng b·ªô k√≠ch th∆∞·ªõc popup Sao & M√¥ t·∫£ C√°ch C·ª•c nh∆∞ popup Chuy√™n ƒê·ªÅ */
#saoPopup .popup-content,
#popupMoTaCachCuc .popup-content {
  width: 90%;
  max-width: 1300px;
  margin-left: auto;
  margin-right: 40px;
  min-width: 400px;
  min-height: 250px;
  resize: both;
}

/* ‚úÖ Ghi ƒë√® inline cho khung m√¥ t·∫£ C√°ch C·ª•c (popup-cc-inner) */
#popupMoTaCachCuc .popup-cc-inner {
  width: 80% !important;
  max-width: 1200px !important;
  min-width: 400px;
  min-height: 250px;
  max-height: 85vh;
  margin-left: auto !important;
  margin-right: 20px !important;
}

#lasoContainer {
  position: relative;  /* ‚úÖ ƒë·∫£m b·∫£o b·∫£ng v√† tick b√°m theo l√° s·ªë */
}

#catHungWrapper {
  position: absolute;  /* ‚úÖ b√°m theo #lasoContainer thay v√¨ to√†n trang */
  top: 50px;           /* ƒëi·ªÅu ch·ªânh cao/th·∫•p cho ƒë·∫πp */
  right: 10px;         /* d√≠nh g√≥c ph·∫£i khung l√° s·ªë */
  width: 450px;        /* b·∫°n c√≥ th·ªÉ thay ƒë·ªïi t√πy th√≠ch */
  background-color: #fff8e1;
  border: 1px solid #ccc;
  padding: 8px 10px;
  font-family: "Times New Roman", serif;
  display: none;
  overflow-y: auto;
  z-index: 300;       /* ‚úÖ ƒë·ªÉ kh√¥ng b·ªã ch√¨m */
  resize: both;        /* ‚úÖ cho ph√©p k√©o thay ƒë·ªïi k√≠ch th∆∞·ªõc */
  overflow: auto;      /* ‚úÖ ƒë·ªÉ k√©o resize c√≥ scrollbar */
}

#catHungWrapper h3 {
  text-align: center;
  margin: 0;
  padding: 4px;
  font-size: 15px;
  font-weight: bold;
  color: #000;
  border-bottom: 1px solid #bca96b;
}
#catHungWrapper .chinhTinh {
  text-align: center;
  font-weight: bold;
  margin-top: 4px;
  margin-bottom: 6px;
  font-size: 14px;
  color: #222;
}
#catHungWrapper table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}
#catHungWrapper td, #catHungWrapper th {
  border: 1px solid #999;
  padding: 4px 6px;
  vertical-align: top;
}
#catHungWrapper th {
  text-align: center;
  background-color: #f3e6b1;
  font-weight: bold;
}
#catHungWrapper .ketluan {
  text-align: center;
  font-weight: bold;
  background-color: #f3e6b1;
  font-size: 15px;
}
#showCatHungToggle {
  position: absolute;
  top: -42px;
  left: -105px;
  background: #fff8e1;
  padding: 4px 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 13px;
  z-index: 9999; /* ‚úÖ ƒë·∫©y cao nh·∫•t ƒë·ªÉ n·ªïi l√™n tr√™n t·∫•t c·∫£ layer */
}



#showCatHungToggle input {
  vertical-align: middle;
  margin-right: 4px;
}

.popup-cc-inner::-webkit-scrollbar {
  display:none;
}

@keyframes popIn {
  from { transform:scale(0.9);opacity:0; }
  to { transform:scale(1);opacity:1; }
}
#btnEditMoTa:hover,#btnSaveMoTa:hover { background:#6923a8; }
#btnCloseMoTa:hover { background:#999; }
#btnCloseMoTaX:hover { color:#b5179e; transform:scale(1.15); }

/* ===== Premium lock overlay ===== */
.premium-box {
  position: relative;
}
.premium-overlay {
  position: absolute;
  inset: 0;
  background: #5a189a; /* ƒë·∫≠m 100% */
  color: #fff;
  padding: 10px;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 600;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  pointer-events: auto; /* ch·∫∑n click/copy b√™n d∆∞·ªõi */
  user-select: none;
  /* h√© r·∫•t √≠t b√™n tr√°i cho t√≤ m√≤ */
  mask: linear-gradient(to right,
    transparent 0%,
    transparent 4%,
    rgba(0,0,0,0.2) 6%,
    black 10%,
    black 100%);
  -webkit-mask: linear-gradient(to right,
    transparent 0%,
    transparent 4%,
    rgba(0,0,0,0.2) 6%,
    black 10%,
    black 100%);
}
.premium-locked {
  pointer-events: none;
  filter: grayscale(0.1) contrast(0.95);
  opacity: 0.9;
}
.premium-locked * {
  pointer-events: none !important;
}
.auth-card {
  pointer-events: auto;
}
.auth-card * {
  pointer-events: auto !important;
}

.premium-content {
  position: relative;
}
